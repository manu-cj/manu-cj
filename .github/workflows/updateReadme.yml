name: Update README with Random Library

on:
  schedule:
    - cron: '0 0 * * *'  # Exécute tous les jours à minuit UTC
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Generate random JavaScript library
      id: generate_library
      run: |
        # Liste des bibliothèques avec descriptions
        libraries=(
          "Axios: Une bibliothèque pour faire des requêtes HTTP."
          "Lodash: Une bibliothèque utilitaire qui fournit des fonctions pour des tâches courantes."
          "Moment.js: Une bibliothèque pour la manipulation et la validation des dates."
          "jQuery: Une bibliothèque rapide, petite et riche en fonctionnalités pour JavaScript."
          "D3.js: Une bibliothèque pour créer des graphiques dynamiques et interactifs."
          "Chart.js: Une bibliothèque pour créer des graphiques simples et flexibles."
          "Underscore: Une bibliothèque utilitaire qui fournit des fonctions pour des tâches courantes."
          "Ramda: Une bibliothèque utilitaire qui fournit des fonctions pour des tâches fonctionnelles."
          "Recharts: Une bibliothèque pour créer des graphiques React."
          "Three.js: Une bibliothèque pour créer des graphiques 3D dans le navigateur."
          "Leaflet: Une bibliothèque pour créer des cartes interactives."
          "Highcharts: Une bibliothèque pour créer des graphiques interactifs."
          "Puppeteer: Une bibliothèque pour automatiser le navigateur Chrome."
          "Async: Une bibliothèque pour la gestion des opérations asynchrones."
          "Anime.js: Une bibliothèque pour créer des animations complexes."
          "Popper.js: Une bibliothèque pour la gestion des pop-ups et des éléments de positionnement."
          "Immutable.js: Une bibliothèque pour les structures de données immuables."
          "Socket.io: Une bibliothèque pour la communication en temps réel avec les websockets."
          "Jest: Un framework de tests pour JavaScript."
          "Mocha: Un framework de tests pour JavaScript."
          "Chai: Une bibliothèque d'assertions pour les tests JavaScript."
          "Sinon: Une bibliothèque pour les tests de comportement en JavaScript."
          "Prettier: Un formateur de code pour JavaScript et d'autres langages."
          "ESLint: Un outil pour l'analyse statique du code JavaScript."
          "RxJS: Une bibliothèque pour la programmation réactive avec des Observables."
          "Eslint-plugin-react: Un plugin ESLint pour les projets React."
          "Hapi.js: Un framework pour créer des applications et des services sur Node.js."
          "Express: Un framework minimaliste pour Node.js."
          "NestJS: Un framework de développement Node.js pour les applications côté serveur."
          "Koa: Un framework web pour Node.js qui est plus léger qu'Express."
          "Mongoose: Une bibliothèque pour gérer les modèles MongoDB avec Node.js."
          "Sequelize: Un ORM pour Node.js pour gérer les bases de données SQL."
          "TypeORM: Un ORM pour TypeScript et JavaScript pour les bases de données SQL."
          "Joi: Une bibliothèque pour la validation des données."
          "Winston: Une bibliothèque pour la journalisation et le logging."
          "Morgan: Un middleware pour la journalisation HTTP requests dans Express."
          "Cypress: Un framework pour les tests end-to-end."
          "Karma: Un test runner pour les tests unitaires JavaScript."
          "Puppeteer-cluster: Une bibliothèque pour gérer les clusters Puppeteer."
          "Gulp: Un toolkit de build pour JavaScript."
          "Webpack: Un module bundler pour les applications JavaScript."
          "Rollup: Un module bundler pour JavaScript, orienté vers l'optimisation des bibliothèques."
          "Parcel: Un bundler d'applications web simple et rapide."
          "Babel: Un transcompilateur JavaScript pour convertir ES6+ en ES5."
          "Vite: Un build tool moderne pour les applications web."
          "Sass: Un préprocesseur CSS."
          "Less: Un préprocesseur CSS avec des fonctionnalités avancées."
          "Tailwind CSS: Un framework CSS utilitaire pour créer des interfaces personnalisées."
          "Bootstrap: Un framework CSS pour le design réactif."
          "Foundation: Un framework CSS pour le développement web."
          "Bulma: Un framework CSS basé sur Flexbox."
          "Materialize: Un framework CSS basé sur les principes Material Design."
          "Normalize.css: Une bibliothèque CSS pour normaliser les styles de navigateur."
          "Animate.css: Une bibliothèque pour les animations CSS."
          "Cleave.js: Une bibliothèque pour le formatage des champs de saisie."
          "Inputmask: Une bibliothèque pour la création de masques de saisie."
          "Vuex: Une bibliothèque de gestion d'état pour Vue.js."
          "MobX: Une bibliothèque pour la gestion d'état dans les applications JavaScript."
          "Zustand: Un état global minimaliste pour React."
          "Redux: Une bibliothèque de gestion d'état pour les applications JavaScript."
          "Redux-Saga: Une bibliothèque pour la gestion des effets secondaires dans Redux."
          "Redux-Thunk: Un middleware pour Redux pour la gestion des fonctions asynchrones."
          "Formik: Une bibliothèque pour la gestion des formulaires dans React."
          "React Hook Form: Une bibliothèque pour la gestion des formulaires dans React."
          "React Router: Une bibliothèque pour la gestion de la navigation dans React."
          "Next.js: Un framework React pour le rendu côté serveur."
          "Gatsby: Un générateur de site statique basé sur React."
          "Nuxt.js: Un framework Vue.js pour le rendu côté serveur."
          "SvelteKit: Un framework pour construire des applications web avec Svelte."
          "Eleventy: Un générateur de site statique."
          "Jekyll: Un générateur de site statique pour GitHub Pages."
          "Hugo: Un générateur de site statique rapide."
          "Grav: Un système de gestion de contenu basé sur des fichiers."
          "KeystoneJS: Un CMS pour Node.js basé sur MongoDB."
          "Strapi: Un CMS open-source basé sur Node.js."
          "Sanity: Un CMS pour gérer des contenus avec une interface personnalisable."
          "Directus: Un CMS open-source avec une API pour les bases de données SQL."
        )

        # Choisir une bibliothèque aléatoire
        random_index=$((RANDOM % ${#libraries[@]}))
        random_library=${libraries[$random_index]}

        # Écrire la bibliothèque aléatoire dans une variable d'environnement
        echo "random_library=$random_library" >> $GITHUB_ENV

    - name: Verify random library
      run: echo "Random library: ${{ env.random_library }}"

    - name: Update README.md
      run: |
        # Conserver le contenu actuel
        current_content=$(cat README.md)

        # Créer la nouvelle section
        new_content="## Bibliothèque JavaScript aléatoire\n\nVoici une bibliothèque JavaScript que vous pourriez trouver utile :\n\n**${{ env.random_library }}**"

        # Écrire le nouveau contenu dans README.md
        echo "$current_content" > README.md
        echo "" >> README.md
        echo "$new_content" >> README.md

    - name: Commit and push changes
      uses: EndBug/add-and-commit@v9
      with:
        author_name: github-actions
        author_email: github-actions@github.com
        message: 'Update README with a random JavaScript library'
