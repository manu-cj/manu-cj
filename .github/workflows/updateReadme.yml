name: Update README

on:
  schedule:
    - cron: '0 0 * * *' # Ex√©cute tous les jours √† minuit
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'

    - name: Generate random library
      id: random-library
      run: |
        # Dictionnaire des biblioth√®ques JavaScript avec descriptions
        declare -A libraries
        libraries=(
          ["Lodash"]="Une biblioth√®que utilitaire moderne qui facilite le travail avec les tableaux, les objets, et plus encore."
          ["Axios"]="Une biblioth√®que pour faire des requ√™tes HTTP depuis le navigateur ou Node.js."
          ["Moment.js"]="Une biblioth√®que pour manipuler et formater des dates et heures."
          ["Day.js"]="Une alternative l√©g√®re √† Moment.js pour manipuler les dates et heures."
          ["date-fns"]="Une biblioth√®que moderne pour manipuler les dates avec une API simple."
          ["Luxon"]="Une biblioth√®que pour g√©rer les dates et heures, bas√©e sur le module Intl de JavaScript."
          ["Chrono"]="Une biblioth√®que pour l'analyse des dates et heures dans le texte."
          ["Formik"]="Une biblioth√®que pour la gestion des formulaires dans les applications React."
          ["React Hook Form"]="Une biblioth√®que pour la gestion des formulaires dans React, avec une API simple et une faible consommation de ressources."
          ["Final Form"]="Une biblioth√®que pour la gestion des formulaires avec une API simple et extensible."
          ["React Final Form"]="Une version de Final Form pour React."
          ["React JSON Schema Form"]="Une biblioth√®que pour g√©n√©rer des formulaires √† partir de sch√©mas JSON."
          ["Monaco Editor"]="L'√©diteur de code de Microsoft, utilis√© dans Visual Studio Code."
          ["CodeMirror"]="Un √©diteur de texte adaptable pour le navigateur, avec de nombreuses fonctionnalit√©s."
          ["Ace Editor"]="Un √©diteur de code qui peut √™tre int√©gr√© dans les applications web."
          ["Draft.js"]="Une biblioth√®que pour la gestion des √©diteurs de texte enrichi dans React."
          ["Quill"]="Un √©diteur de texte riche avec une API extensible."
          ["TinyMCE"]="Un √©diteur de texte riche pour le web, qui supporte les plugins et la personnalisation."
          ["SimpleMDE"]="Un √©diteur Markdown simple et extensible pour le web."
          ["Mark Text"]="Un √©diteur Markdown open-source avec une interface utilisateur moderne."
          ["Chart.js"]="Une biblioth√®que pour cr√©er des graphiques interactifs en JavaScript."
          ["D3.js"]="Une biblioth√®que pour manipuler des documents bas√©s sur des donn√©es avec HTML, SVG, et CSS."
          ["Highcharts"]="Une biblioth√®que pour cr√©er des graphiques interactifs et dynamiques."
          ["ApexCharts"]="Une biblioth√®que de graphiques modernes avec une API simple."
          ["ECharts"]="Une biblioth√®que de graphiques puissante et flexible pour le web."
          ["Plotly.js"]="Une biblioth√®que pour cr√©er des graphiques interactifs et de haute qualit√©."
          ["Three.js"]="Une biblioth√®que pour cr√©er et afficher des graphiques 3D en JavaScript."
          ["jQuery"]="Une biblioth√®que populaire pour simplifier le d√©veloppement JavaScript."
          ["Preact"]="Une biblioth√®que pour construire des interfaces utilisateur avec une API similaire √† React."
          ["Backbone.js"]="Une biblioth√®que qui fournit une structure aux applications web en utilisant des mod√®les avec une liaison cl√©-valeur."
          ["Ember.js"]="Un framework JavaScript ambitieux pour cr√©er des applications web."
          ["Mithril"]="Un framework JavaScript l√©ger pour construire des interfaces utilisateur."
          ["Aurelia"]="Un framework JavaScript moderne pour construire des applications web."
          ["Webpack"]="Un module bundler pour les applications JavaScript modernes."
          ["Rollup"]="Un module bundler pour les projets JavaScript qui se concentre sur la sortie optimis√©e."
          ["Parcel"]="Un bundler web z√©ro configuration qui supporte de nombreux formats de fichiers."
          ["Vite"]="Un outil de construction rapide pour les projets modernes avec une configuration minimale."
          ["ESLint"]="Un linter pour identifier et corriger les probl√®mes dans le code JavaScript."
          ["Prettier"]="Un formateur de code pour garder un style de code coh√©rent."
          ["Apollo Client"]="Une biblioth√®que pour la gestion des donn√©es GraphQL dans les applications JavaScript."
          ["Fetch API"]="Une API moderne pour faire des requ√™tes HTTP dans le navigateur."
          ["Superagent"]="Une biblioth√®que l√©g√®re pour faire des requ√™tes HTTP."
          ["Express"]="Un framework web pour Node.js qui facilite la cr√©ation d'applications web et APIs."
          ["NestJS"]="Un framework pour construire des applications serveur avec Node.js, bas√© sur TypeScript."
          ["Koa"]="Un framework web pour Node.js con√ßu par les cr√©ateurs d'Express."
          ["RxJS"]="Une biblioth√®que pour la programmation r√©active en JavaScript."
          ["Redux"]="Une biblioth√®que pour la gestion d'√©tat dans les applications JavaScript."
          ["Redux-Saga"]="Une biblioth√®que pour g√©rer les effets secondaires dans Redux."
          ["Immer"]="Une biblioth√®que pour manipuler les √©tats immuables dans JavaScript."
          ["Zustand"]="Une biblioth√®que pour la gestion d'√©tat simple et flexible dans les applications React."
          ["MobX"]="Une biblioth√®que pour la gestion d'√©tat r√©active et transparente."
        )

        # Choisir une biblioth√®que al√©atoire
        library_names=("${!libraries[@]}")
        random_library=${library_names[$((RANDOM % ${#library_names[@]}))]}
        random_description=${libraries[$random_library]}

        echo "random_library=${random_library}" >> $GITHUB_ENV
        echo "random_description=${random_description}" >> $GITHUB_ENV

    - name: Update README.md
      run: |
        # Variables
        RANDOM_LIBRARY=${{ env.random_library }}
        RANDOM_DESCRIPTION=${{ env.random_description }}

        # Cr√©er ou √©craser le README.md avec le contenu mis √† jour
        echo '<meta name="description" content="GitHub profile in blue color">' > README.md
        echo '<meta name="keywords" content="Full Stack Developer, GitHub Stats, GitHub Profile, JavaScript, TypeScript, React, Nodejs, HTML5, CSS3, PHP, MySQL, MongoDB"/>' >> README.md
        echo '<div>' >> README.md
        echo '   <img width=100% src="https://capsule-render.vercel.app/api?type=waving&color=007acc&height=120&section=header">' >> README.md
        echo '</div>' >> README.md
        echo '<img src="https://readme-typing-svg.herokuapp.com/?color=1BF7B3&size=35&center=true&weight=700&size=40&pause=1500&&vCenter=true&width=1000&lines=Hi,+I\'m+Manu;I\'m+a+Full+Stack+Js+Developer;Be+Welcome!+üòÅ">' >> README.md
        echo '<br/>' >> README.md
        echo '<br/>' >> README.md
        echo '<table align="center" style="border-radius: 15px;">' >> README.md
        echo '  <tr>' >> README.md
        echo '    <td valign="top" width="33%" style="border: 2px solid black; padding: 10px; background-color: #f9f9f9;">' >> README.md
        echo '      <br>' >> README.md
        echo '      <img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&weight=700&size=40&duration=2000&pause=99000&center=true&vCenter=truerandom=false&reapeat=false&width=435&height=100&lines=Frontend">' >> README.md
        echo '      <p align="center">' >> README.md
        echo '        <a href="https://skillicons.dev">' >> README.md
        echo '          <img src="https://skillicons.dev/icons?i=html,sass,js,vue,react,ts" />' >> README.md
        echo '        </a>' >> README.md
        echo '      </p>' >> README.md
        echo '    </td>' >> README.md
        echo '    <td valign="top" width="33%" style="border: 2px solid black; padding: 10px; background-color: #e9e9e9;">' >> README.md
        echo '      <br>' >> README.md
        echo '      <img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&weight=700&size=40&duration=2000&pause=99000&center=true&vCenter=truerandom=false&reapeat=false&width=435&height=100&lines=Backend">' >> README.md
        echo '      <p align="center">' >> README.md
        echo '        <a href="https://skillicons.dev">' >> README.md
        echo '          <img src="https://skillicons.dev/icons?i=php,docker,mysql" />' >> README.md
        echo '        </a>' >> README.md
        echo '      </p>' >> README.md
        echo '    </td>' >> README.md
        echo '    <td valign="top" width="33%" style="border: 2px solid black; padding: 10px; background-color: #d9d9d9;">' >> README.md
        echo '      <br>' >> README.md
        echo '      <img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&weight=700&size=40&duration=2000&pause=99000&center=true&vCenter=truerandom=false&reapeat=false&width=435&height=100&lines=Other">' >> README.md
        echo '      <p align="center">' >> README.md
        echo '        <a href="https://skillicons.dev">' >> README.md
        echo '          <img src="https://skillicons.dev/icons?i=git,py,linux" />' >> README.md
        echo '        </a>' >> README.md
        echo '      </p>' >> README.md
        echo '    </td>' >> README.md
        echo '  </tr>' >> README.md
        echo '  <tr>' >> README.md
        echo '    <td colspan="3" valign="top" style="border: 2px solid black; padding: 10px; background-color: #c9c9c9;">' >> README.md
        echo '      <br>' >> README.md
        echo '      <div align="center">' >> README.md
        echo '        <img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&weight=700&size=30&duration=1000&pause=99000&center=true&vCenter=truerandom=false&reapeat=false&width=435&height=100&lines=I+learn">' >> README.md
        echo '      </div>' >> README.md
        echo '      <p align="center">' >> README.md
        echo '        <a href="https://skillicons.dev">' >> README.md
        echo '          <img src="https://skillicons.dev/icons?i=svelte,angular,nodejs,mongodb" />' >> README.md
        echo '        </a>' >> README.md
        echo '      </p>' >> README.md
        echo '    </td>' >> README.md
        echo '  </tr>' >> README.md
        echo '</table>' >> README.md
        echo '<br/>' >> README.md
        echo '###' >> README.md
        echo '<div align="center">' >> README.md
        echo '  <img height="190rem" alt="GitHub Stats" src="https://github-readme-stats.vercel.app/api?username=manu-cj&show_icons=true&title_color=007acc&icon_color=007acc&text_color=007acc&bg_color=00000000&border_radius=15&border_color=00000000&count_private=true&hide=contribs&hide_rank=true"/>' >> README.md
        echo '  <img height="190rem" alt="Most Used Languages" src="https://github-readme-stats.vercel.app/api/top-langs/?username=manu-cj&langs_count=6&layout=compact&title_color=007acc&icon_color=007acc&text_color=007acc&bg_color=00000000&border_radius=15&border_color=00000000&hide=css,html,hack,Dockerfile,scss"/>' >> README.md
        echo '</div>' >> README.md
        echo '<div align="center">' >> README.md
        echo '  <img src="https://github-readme-streak-stats.herokuapp.com/?user=manu-cj&theme=react&langs_count=6&layout=compact&title_color=007acc&icon_color=007acc&text_color=007acc&bg_color=00000000&border_radius=15&border_color=00000000&hide=jupyter%20notebook" height="200px" />' >> README.md
        echo '</div>' >> README.md
        echo '<br>' >> README.md
        echo '<div align="center">' >> README.md
        echo '  <a href="https://www.linkedin.com/in/manu-cj" target="_blank">' >> README.md
        echo '    <img height="30" width="120" title="linkedin.com/in/manu-cj/" src="./linkedin.png">' >> README.md
        echo '  </a>' >> README.md
        echo '</div>' >> README.md
        echo '<a href="#">' >> README.md
        echo '  <img width=100% src="https://capsule-render.vercel.app/api?type=waving&color=007acc&height=120&section=footer"/>' >> README.md
        echo '</a>' >> README.md
        echo '<h2 align="center">My activity</h2>' >> README.md
        echo '<div align="center">' >> README.md
        echo '  <img src="https://github.com/manu-cj/manu-cj/blob/output/github-contribution-grid-snake-dark.svg">' >> README.md
        echo '</div>' >> README.md
        echo '<h2 align="center">Random JavaScript Library</h2>' >> README.md
        echo '<p align="center">Here is a random JavaScript library that you might find useful:</p>' >> README.md
        echo '<p align="center"><b>${RANDOM_LIBRARY}</b></p>' >> README.md
        echo '<p align="center">${RANDOM_DESCRIPTION}</p>' >> README.md

    - name: Commit and push changes
      run: |
        git config --global user.name 'GitHub Actions'
        git config --global user.email 'actions@github.com'
        git add README.md
        git commit -m 'Update README with new sections and a random JavaScript library'
        git push
